## 计算机网络和因特网

### 考试大纲
- 网络协议的概念
- 无连接和面向连接服务的概念和区别
- 电路交换和分组交换的概念和区别
- 网络延时概念和计算方法
- 计算机网络的体系结构及各层交互的封装过程

### 网络协议的概念
P6 *定义了在两个或多个通信实体之间交换的报文的格式和顺序，以及报文发送和/或接收一条报文或其他事件所采取的动作*

### 电路交换和分组交换
- 分组交换: 对要传输的数据进行分组，然后以**存储转发**的方式进行传输
	- 存储转发 分组到达节点，节点进行存储后，查找转发表，然后转发到下一个节点
		1. 交换机能够开始向输出链路传输该分组的第一个bit之前，必须接收到整个分组
		2. 分组传输的时候，当分组的前沿到达路由器的时候，因为**存储转发**的机制，必须先缓存才能进行转发
	- 排队时延和分组丢失(丢包)
		- 排队时延是因为交换机有个输出缓存/队列，转发的时候发现要转发的链路处于忙碌状态就要在缓存中等待，这个过程就是排队时延
		- 丢包是因为这个缓存是有大小的，超过这个大小后就会丢包
- 电路交换: 在进行传输前，已经在双方之间建立了连接(预留了需要的资源)，然后按照之前规定好的进行传输就行
	- 频分复用FDM和时分复用TDM ,两种划分链路的方式
- 二者区别
	- 电路交换时延小，直接传输，缺点就是线路利用率低
	- 分组交换充分利用线路资源，按需分配

### 时延
- 处理时延和传输时延 分组交换的缓存与排队特性导致的
- 传输时延 L/R
- 传播时延 d/s
- 传输时延和传播时延的比较
	传输时延是路由器推出分钟所需要的时间，由分组长度和L与链路传输速率(带宽)R的函数，与两台路由器之间的距离d无关，而传播时延是一个bit从一台路由器到另一台路由器所需要的时间。只与距离d和传播速率s有关
- d~nodal~ = d~proc~ + d~queue~ + d~trans~ + d~prop~
- 端到端时延
	- 源主机与目的主机之间有N-1台路由器，网络无拥塞，排队时延忽略不计
	- d~end-end~ = d~proc~ + d~queue~ + d~trans~ + d~prop~
- 吞吐量 瞬时网速 min{R~s~, R~c~} R~s~ 服务器与路由器之间的实际带宽，R~c~ 客户端与路由器之间的带宽

### 体系结构分层
#### 分层的原因
- 每个层次通过以下方式提供服务
	- 在这层执行了某些动作
	- 使用直接下层的服务
- 改变服务的实现而不影响该系统其他组件是分层的另一个重要优点

##### 分层的优点

1. 使复杂系统简化

2. 易于维护、更新系统

####  协议分层
- 协议层能够用软件、硬件或二者结合来实现
- 不同部分分布在网络组件的各个部分
- 协议分层具有**结构化**和**概念化**的优点

##### 分层的缺点
1. 一层可能冗余较低层的功能，例如，许多协议栈在基于每段链路和基于端到端两种情况下，都提供了差错恢复

2. 某层的功能需要仅在其他层才出现的信息(如时间戳)，这违反了层次分离的目标

- **协议栈** 各层的所有协议
- 因特网的协议栈有五层
	- 应用层 这层的信息分组称为**报文 message** HTTP SMTP FTP 
	- 运输层 **报文段 segment** ==无连接与面向连接的服务== TCP UDP
	- 网络层 **数据报 datagram** 又称IP层
	- 链路层 在临近单元之间传输数据 **帧 frame**  以太网 PPP
	- 物理层 在节点之间传输比特流 传输媒体 光纤之类
- OSI比因特网多出两层，这两层通常都是由软件开发者来实现
  - 表示层 使通信的APP能够解释交换数据的含义
    - 数据压缩、数据解密 -- 自解释
    - 数据描述 -- 让app不必担心在不同计算机中表示/存储的内部格式不同的问题
  - 会话层
    - 数据交换的定界和同步， 包括建立检查点和恢复方案的方法



### 封装

应用层报文传输到运输层，简单来说，运输层把报文+H~1~(运输层的头信息)，H~1~+M（有效载荷，上一层传下来的数据）就是报文段，继续往下层传递以此类推

> H~1~中也许包括：**允许接收端运输层向下像适当的应用程序交付报文的信息**；**差错检测位信息**，该信息让接收方能够判断报文中的bit是否在途中已经改变

tips: 如果报文很长，先分成多个报文段，每个报文段在网络层再分成多个数据报



![11](https://gitee.com/hhRoom/uploadImage/raw/master/img/11.png)

- 路由器 3层 可以实现IP协议
- 链路层交换机 2层 识别地址依靠以太网地址
- 主机 5层

